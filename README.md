# Weekend Project - Week 4


<img width="1096" alt="Screenshot 2024-09-16 at 05 37 18" src="_images/Screenshot 2024-09-16 at 05.37.18.png">




## About
To consolidate this week's learning, complete the following project:

- [x] Create a GitHub repository for your project
- [x] Add all group members as collaborators
- [x] Create a `README.md` file with a comprehensive project description
- [x] Use the `ts-playground` as a foundation or develop a new application from scratch using Next.js
- [x] Design a page with a single input field for .txt file uploads
- [x] Users should upload a book or similar content with characters and settings
- [x] Implement a button to extract characters from the uploaded file
- [x] Develop a RAG pipeline to extract characters from the uploaded file
- [x] Each character should have a name, description, and personality
- [x] Add a text area ~below~ next to ( :-) ) the button to display the results
- [x] Convert the output from the AI into an array of objects and present it in a table format
- [ ] (optional) Modify the `retrieveandquery.ts` file to use Structured Outputs to make it easier to process the response
- [ ] Integrate the `ts-playground` project with the `story-telling-app` to enable users to create new stories using imported characters, reusing their descriptions and personalities inside the stories being generated by the AI
- [ ] Submit your project through the designated submission form

## Quickstart Setup

### 1. Clone repo

```shell
git clone https://github.com/alexmazaltov/encode_bootcamp_week_4
cd encode_bootcamp_week_4
```

### 2. Set your [OpenAI API key](https://platform.openai.com/api-keys)

in `.env.local` which should be already in `.gitignore`:

```shell
export OPENAI_API_KEY="sk_..."
```


### 3. Install dependencies

```shell
npm install
```

### 4. Run

```shell
npm run dev
```

### 5. Navigate to [http://localhost:3000](http://localhost:3000).

#### 5.1 Create an assistant

- Create your AI assistant, and add the generated ID to `app/assistant-config.ts`.

<img width="25%" alt="Screenshot 2024-09-16 at 05.11.28" src="_images/Screenshot 2024-09-16 at 05.11.28.png">

- This will also be automatically available in your [OpenAI Platform WebGUI](https://platform.openai.com/playground/assistants)

<img width="25%" alt="Screenshot 2024-09-16 at 05.19.55" src="_images/Screenshot 2024-09-16 at 05.19.55.png">


#### 5.2 Click next at the Welcome screen

<img width="75%" alt="Screenshot 2024-09-16 at 05.14.20" src="_images/Screenshot 2024-09-16 at 05.14.20.png">

#### 5.3 Main Screen
- here you can click the upload button and upload a file
- a sample is provided in this repo `A Study in Scarlet.txt` by Arthur Conan Doyle

<img width="75%" alt="Screenshot 2024-09-16 at 05.14.59" src="_images/Screenshot 2024-09-16 at 05.14.59.png">

#### 5.4 Extract Characters
- after the uploaded file has been processed (and the embedings added to the vector store)
- you can click the extract button to will extract the main characters profiles from the story

<img width="75%" alt="Screenshot 2024-09-16 at 05.16.35" src="_images/Screenshot 2024-09-16 at 05.16.35.png">

#### 5.4 Generate Characters Table
- this can take a while, if you click the Extract button you might get an error - be patient
- when the processing is complete you will see a table with Story Characters
- a Description and Personality profile will be filled based on the RAG pipeline results

<img width="75%" alt="Screenshot 2024-09-16 at 05.21.19" src="_images/Screenshot 2024-09-16 at 05.21.19.png">


## Deployment

You can deploy this project to Vercel or any other platform that supports Next.js.

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fopenai%2Fopenai-assistants-quickstart&env=OPENAI_API_KEY,OPENAI_ASSISTANT_ID&envDescription=API%20Keys%20and%20Instructions&envLink=https%3A%2F%2Fgithub.com%2Fopenai%2Fopenai-assistants-quickstart%2Fblob%2Fmain%2F.env.example)

## Overview

This project is intended to serve as a template for using the Assistants API in Next.js with [streaming](https://platform.openai.com/docs/assistants/overview/step-4-create-a-run), tool use ([code interpreter](https://platform.openai.com/docs/assistants/tools/code-interpreter) and [file search](https://platform.openai.com/docs/assistants/tools/file-search)), and [function calling](https://platform.openai.com/docs/assistants/tools/function-calling). While there are multiple pages to demonstrate each of these capabilities, they all use the same underlying assistant with all capabilities enabled.

The main logic for chat will be found in the `Chat` component in `app/components/chat.tsx`, and the handlers starting with `api/assistants/threads` (found in `api/assistants/threads/...`). Feel free to start your own project and copy some of this logic in! The `Chat` component itself can be copied and used directly, provided you copy the styling from `app/components/chat.module.css` as well.

### Pages

- Basic Chat Example: [http://localhost:3000/examples/basic-chat](http://localhost:3000/examples/basic-chat)
- Function Calling Example: [http://localhost:3000/examples/function-calling](http://localhost:3000/examples/function-calling)
- File Search Example: [http://localhost:3000/examples/file-search](http://localhost:3000/examples/file-search)
- Full-featured Example: [http://localhost:3000/examples/all](http://localhost:3000/examples/all)

### Main Components

- `app/components/chat.tsx` - handles chat rendering, [streaming](https://platform.openai.com/docs/assistants/overview?context=with-streaming), and [function call](https://platform.openai.com/docs/assistants/tools/function-calling/quickstart?context=streaming&lang=node.js) forwarding
- `app/components/file-viewer.tsx` - handles uploading, fetching, and deleting files for [file search](https://platform.openai.com/docs/assistants/tools/file-search)

### Endpoints

- `api/assistants` - `POST`: create assistant (only used at startup)
- `api/assistants/threads` - `POST`: create new thread
- `api/assistants/threads/[threadId]/messages` - `POST`: send message to assistant
- `api/assistants/threads/[threadId]/actions` - `POST`: inform assistant of the result of a function it decided to call
- `api/assistants/files` - `GET`/`POST`/`DELETE`: fetch, upload, and delete assistant files for file search

## Feedback

Let us know if you have any thoughts, questions, or feedback in [this form](https://docs.google.com/forms/d/e/1FAIpQLScn_RSBryMXCZjCyWV4_ebctksVvQYWkrq90iN21l1HLv3kPg/viewform?usp=sf_link)!
